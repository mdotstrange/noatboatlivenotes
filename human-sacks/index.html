<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Human Sacks - Noat Boat</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, sans-serif; background: #f2f2f2; color: #111; height: 100vh; display: flex; flex-direction: column; }
    .topbar { display: flex; align-items: center; padding: 10px 14px; border-bottom: 1px solid #d9d9d9; background: #ffffff; gap: 12px; }
    .back-btn { padding: 6px 12px; border: 1px solid #d9d9d9; background: #ffffff; border-radius: 6px; cursor: pointer; font-size: 13px; color: #111; text-decoration: none; }
    .title { font-size: 16px; font-weight: 700; font-family: monospace; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .save-status { font-size: 12px; color: #666; font-family: monospace; }
    .main { display: flex; flex: 1; overflow: hidden; gap: 16px; padding: 14px; }
    .editor-pane { flex: 1; display: flex; flex-direction: column; min-width: 200px; }
    textarea { flex: 1; border: 1px solid #d9d9d9; border-radius: 12px; resize: none; padding: 14px; font-size: 14px; line-height: 1.55; font-family: monospace; background: #fff; color: #111; outline: none; }
    .canvas-pane { flex: 1; display: flex; flex-direction: column; min-width: 200px; border: 1px solid #d9d9d9; border-radius: 12px; overflow: hidden; background: #fff; }
    .canvas-toolbar { display: flex; gap: 6px; padding: 8px 10px; border-bottom: 1px solid #d9d9d9; background: #ffffff; }
    .btn { padding: 5px 10px; border: 1px solid #d9d9d9; background: #ffffff; border-radius: 6px; cursor: pointer; font-size: 12px; color: #111; }
    .btn.active { background: #eef5ff; border-color: #c9dcff; }
    .canvas-container { flex: 1; position: relative; overflow: hidden; }
    .audio-player { padding: 10px; border-top: 1px solid #d9d9d9; display: none; }
    .audio-player audio { width: 100%; }
    @media (max-width: 768px) { .main { flex-direction: column; } .editor-pane, .canvas-pane { flex: none; height: 45vh; } }
  </style>
</head>
<body>
  <div class="topbar">
    <a href="../index.html" class="back-btn">Back</a>
    <div class="title">Human Sacks</div>
    <div class="save-status" id="saveStatus"></div>
  </div>
  <div class="main">
    <div class="editor-pane">
      <textarea id="editor" spellcheck="false">The attraction to &quot;beautiful&quot; humans is part of a biological process to reproduce-

Part is a hunters desire to own beautiful things-

Part is also an appreciation of the art of nature-

What makes people &quot;beautiful&quot; why? Why are certain people &quot;beautiful&quot; and some &quot;ugly&quot;?

Who sets the standard? Is it biology or something else?</textarea>
    </div>
    <div class="canvas-pane" id="canvasPane">
      <div class="canvas-toolbar">
        <button id="selectBtn" class="btn active">Select</button>
        <button id="drawBtn" class="btn">Draw</button>
      </div>
      <div class="canvas-container" id="canvasContainer"><canvas id="fabricCanvas"></canvas></div>
      <div class="audio-player"><audio controls loop src=""></audio></div>
    </div>
  </div>
  <script>
    (function() {
      var STORAGE_KEY = 'noatboat_' + "human-sacks";
      var canvasJson = "{\"version\":\"5.3.0\",\"objects\":[]}";
      var canvasImage = "canvas.png";
      var fallbackImage = null;
      var fabricCanvas = null, saveTimer = null;
      var editor = document.getElementById('editor');
      var saveStatus = document.getElementById('saveStatus');
      try { var saved = localStorage.getItem(STORAGE_KEY); if (saved) { var data = JSON.parse(saved); if (data.content) editor.value = data.content; } } catch(e){}
      function scheduleSave() {
        if (saveTimer) clearTimeout(saveTimer);
        saveTimer = setTimeout(function() {
          try { localStorage.setItem(STORAGE_KEY, JSON.stringify({ content: editor.value })); saveStatus.textContent = 'saved'; } catch(e){}
        }, 1000);
      }
      editor.addEventListener('input', function() { saveStatus.textContent = 'modified'; scheduleSave(); });
      function initCanvas() {
        var container = document.getElementById('canvasContainer');
        var rect = container.getBoundingClientRect();
        var w = Math.max(rect.width, 300), h = Math.max(rect.height, 200);
        var el = document.getElementById('fabricCanvas'); el.width = w; el.height = h;
        fabricCanvas = new fabric.Canvas('fabricCanvas', { width: w, height: h });
        fabricCanvas.freeDrawingBrush.width = 3;
        if (canvasJson) { fabricCanvas.loadFromJSON(canvasJson, function() { fabricCanvas.renderAll(); }); }
        else if (canvasImage || fallbackImage) {
          fabric.Image.fromURL(canvasImage || fallbackImage, function(img) {
            if (!img) return;
            var scale = Math.min((w*0.9)/img.width, (h*0.9)/img.height, 1);
            img.scale(scale);
            img.set({ left: (w - img.getScaledWidth())/2, top: (h - img.getScaledHeight())/2 });
            fabricCanvas.add(img); fabricCanvas.renderAll();
          });
        }
      }
      document.getElementById('selectBtn').onclick = function() { if(fabricCanvas) { fabricCanvas.isDrawingMode = false; this.classList.add('active'); document.getElementById('drawBtn').classList.remove('active'); } };
      document.getElementById('drawBtn').onclick = function() { if(fabricCanvas) { fabricCanvas.isDrawingMode = true; this.classList.add('active'); document.getElementById('selectBtn').classList.remove('active'); } };
      if (document.getElementById('canvasPane').style.display !== 'none') setTimeout(initCanvas, 100);
    })();
  </script>
</body>
</html>