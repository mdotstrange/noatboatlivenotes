<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To do before Christmas New Years 2025 trip - Noat Boat</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, -apple-system, sans-serif; background: #f2f2f2; color: #111; height: 100vh; display: flex; flex-direction: column; }
    .topbar { display: flex; align-items: center; padding: 10px 14px; border-bottom: 1px solid #d9d9d9; background: #ffffff; gap: 12px; }
    .back-btn { padding: 6px 12px; border: 1px solid #d9d9d9; background: #ffffff; border-radius: 6px; cursor: pointer; font-size: 13px; color: #111; text-decoration: none; }
    .title { font-size: 16px; font-weight: 700; font-family: monospace; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .save-status { font-size: 12px; color: #666; font-family: monospace; }
    .main { display: flex; flex: 1; overflow: hidden; gap: 16px; padding: 14px; min-height: 0; }
    .editor-pane { flex: 1; display: flex; flex-direction: column; min-width: 200px; min-height: 0; }
    textarea { flex: 1; border: 1px solid #d9d9d9; border-radius: 12px; resize: none; padding: 14px; font-size: 14px; line-height: 1.55; font-family: monospace; background: #fff; color: #111; outline: none; }
    .canvas-pane { flex: 1; display: flex; flex-direction: column; min-width: 200px; min-height: 0; border: 1px solid #d9d9d9; border-radius: 12px; overflow: hidden; background: #fff; }
    .canvas-toolbar { display: flex; gap: 6px; padding: 8px 10px; border-bottom: 1px solid #d9d9d9; background: #ffffff; flex-shrink: 0; }
    .btn { padding: 5px 10px; border: 1px solid #d9d9d9; background: #ffffff; border-radius: 6px; cursor: pointer; font-size: 12px; color: #111; }
    .btn.active { background: #eef5ff; border-color: #c9dcff; }
    .canvas-container { flex: 1; position: relative; overflow: hidden; min-height: 0; display: flex; align-items: center; justify-content: center; }
    .canvas-wrapper { transform-origin: center center; }
    .audio-player { padding: 10px; border-top: 1px solid #d9d9d9; display: none; flex-shrink: 0; }
    .audio-player audio { width: 100%; }
    @media (max-width: 768px) { .main { flex-direction: column; } .editor-pane, .canvas-pane { flex: none; height: 45vh; } }
  </style>
</head>
<body>
  <div class="topbar">
    <a href="../index.html" class="back-btn">Back</a>
    <div class="title">To do before Christmas New Years 2025 trip</div>
    <div class="save-status" id="saveStatus"></div>
  </div>
  <div class="main">
    <div class="editor-pane">
      <textarea id="editor" spellcheck="false">Hopefully did all the things
	
In Lisbon airport early as delays etc tryna be safe bruh

	</textarea>
    </div>
    <div class="canvas-pane" id="canvasPane">
      <div class="canvas-toolbar">
        <button id="selectBtn" class="btn active">Select</button>
        <button id="drawBtn" class="btn">Draw</button>
      </div>
      <div class="canvas-container" id="canvasContainer">
        <div class="canvas-wrapper" id="canvasWrapper">
          <canvas id="fabricCanvas"></canvas>
        </div>
      </div>
      <div class="audio-player"><audio controls loop src=""></audio></div>
    </div>
  </div>
  <script>
    (function() {
      var STORAGE_KEY = 'noatboat_' + "to-do-before-christmas-new-years-2025-trip";
      var canvasJson = "{\"version\":\"5.3.0\",\"objects\":[{\"type\":\"path\",\"version\":\"5.3.0\",\"originX\":\"left\",\"originY\":\"top\",\"left\":362.61,\"top\":373.49,\"width\":659.8,\"height\":598.18,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":3,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"round\",\"strokeUniform\":false,\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"selectable\":true,\"hasControls\":true,\"path\":[[\"M\",767.8295332306903,374.9886724544871],[\"Q\",767.8265332306903,374.9886724544871,765.8259267035248,374.9886724544871],[\"Q\",763.8253201763595,374.9886724544871,756.8231973312805,374.9886724544871],[\"Q\",749.8210744862016,374.9886724544871,736.8171320596264,374.9886724544871],[\"Q\",723.8131896330511,374.9886724544871,702.8068210978142,374.9886724544871],[\"Q\",681.8004525625773,374.9886724544871,656.7928709730096,374.9886724544871],[\"Q\",631.7852893834419,374.9886724544871,602.7764947395433,379.9901885925929],[\"Q\",573.7677000956447,384.99170473069876,544.7589054517462,395.99504023453164],[\"Q\",515.7501108078476,406.9983757383646,492.7431357454453,421.002620925061],[\"Q\",469.73616068304295,435.0068661117574,450.73039867497147,452.01202098131733],[\"Q\",431.7246366669,469.01717585087727,417.720390976742,488.02293717567954],[\"Q\",403.7161452865841,507.0286985004818,393.713112650757,530.0356727357688],[\"Q\",383.71008001492993,553.0426469710558,377.7082604334337,579.0505308892062],[\"Q\",371.70644085193743,605.0584148073567,368.7055310611893,637.0681180912343],[\"Q\",365.7046212704412,669.0778213751117,364.70431800685844,708.0896472523375],[\"Q\",363.70401474327576,747.1014731295633,366.7049245340239,787.1136022344101],[\"Q\",369.705834324772,827.1257313392571,380.7091702241818,858.1351313955133],[\"Q\",391.7125061235916,889.1445314517697,406.71705507733225,911.1512024594356],[\"Q\",421.7216040310729,933.1578734671014,434.7255464576481,946.1618154261766],[\"Q\",447.7294888842233,959.1657573852518,455.731914992885,963.1669702957365],[\"Q\",463.7343411015467,967.1681832062212,470.7364639466257,968.1684864338424],[\"Q\",477.7385867917046,969.1687896614635,480.7394965824527,969.1687896614635],[\"Q\",483.74040637320087,969.1687896614635,486.741316163949,969.1687896614635],[\"Q\",489.7422259546971,969.1687896614635,499.7452585905242,969.1687896614635],[\"Q\",509.7482912263513,969.1687896614635,528.7540532344228,970.1690928890847],[\"Q\",547.7598152424943,971.1693961167059,573.7677000956447,971.1693961167059],[\"Q\",599.7755849487952,971.1693961167059,633.7858959106072,972.169699344327],[\"Q\",667.7962068724194,973.1700025719482,701.8065178342315,973.1700025719482],[\"Q\",735.8168287960436,973.1700025719482,765.8259267035248,970.1690928890847],[\"Q\",795.8350246110061,967.1681832062212,829.8453355728183,959.1657573852518],[\"Q\",863.8556465346304,951.1633315642824,893.8647444421117,938.1593896052073],[\"Q\",923.873842349593,925.155447646132,943.8799076212472,914.1521121422991],[\"Q\",963.8859728929013,903.1487766384662,976.8899153194766,892.1454411346333],[\"Q\",989.8938577460518,881.1421056308003,997.8962838547135,870.1387701269674],[\"Q\",1005.8987099633752,859.1354346231345,1011.9005295448715,846.1314926640594],[\"Q\",1017.9023491263677,833.1275507049841,1019.9029556535331,817.1226990630453],[\"Q\",1021.9035621806985,801.1178474211065,1022.9038654442812,785.1129957791677],[\"Q\",1023.904168707864,769.108144137229,1023.904168707864,751.102686040048],[\"Q\",1023.904168707864,733.0972279428668,1021.9035621806986,717.092376300928],[\"Q\",1019.9029556535331,701.0875246589893,1014.9014393356196,685.0826730170505],[\"Q\",1009.899923017706,669.0778213751117,1004.8984066997924,654.0732729607942],[\"Q\",999.8968903818788,639.0687245464766,993.8950708003827,623.0638729045379],[\"Q\",987.8932512188863,607.0590212625991,979.8908251102247,591.0541696206603],[\"Q\",971.888399001563,575.0493179787215,963.8859728929013,561.0450727920252],[\"Q\",955.8835467842397,547.0408276053287,947.881120675578,534.0368856462535],[\"Q\",939.8786945669164,521.0329436871782,931.8762684582547,510.0296081833453],[\"Q\",923.873842349593,499.02627267951243,916.871719504514,490.0235436309219],[\"Q\",909.869596659435,481.02081458233135,902.8674738143561,473.01838876136196],[\"Q\",895.8653509692771,465.01596294039257,888.8632281241981,458.0138403470444],[\"Q\",881.8611052791192,451.01171775369613,875.8592856976229,445.0098983879691],[\"Q\",869.8574661161267,439.0080790222421,863.8556465346305,434.0065628841362],[\"Q\",857.8538269531342,429.00504674603036,849.8514008444724,425.00383383554566],[\"Q\",841.8489747358108,421.00262092506097,833.8465486271491,418.0017112421974],[\"Q\",825.8441225184874,415.0008015593339,818.8419996734085,413.00019510409163],[\"Q\",811.8398768283296,410.9995886488493,804.8377539832506,408.99898219360693],[\"Q\",797.8356311381716,406.9983757383646,791.8338115566753,405.99807251074344],[\"Q\",785.8319919751791,404.99776928312224,779.8301723936829,403.99746605550104],[\"Q\",773.8283528121866,402.9971628278799,766.8262299671076,402.9971628278799],[\"Q\",759.8241071220286,402.9971628278799,752.8219842769497,402.9971628278799],[\"Q\",745.8198614318708,402.9971628278799,739.8180418503745,402.9971628278799],[\"Q\",733.8162222688782,402.9971628278799,728.8147059509647,402.9971628278799],[\"Q\",723.8131896330511,402.9971628278799,719.8119765787203,402.9971628278799],[\"Q\",715.8107635243895,402.9971628278799,713.8101569972241,403.99746605550104],[\"Q\",711.8095504700586,404.99776928312224,710.8092472064759,405.99807251074344],[\"Q\",709.8089439428932,406.9983757383646,708.8086406793104,415.0008015593339],[\"L\",707.8053374157278,423.0062273803033]]},{\"type\":\"path\",\"version\":\"5.3.0\",\"originX\":\"left\",\"originY\":\"top\",\"left\":528.25,\"top\":583.55,\"width\":131.54,\"height\":94.03,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":3,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"round\",\"strokeUniform\":false,\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"selectable\":true,\"hasControls\":true,\"path\":[[\"M\",529.7513564980054,585.0493502549332],[\"Q\",529.7543564980054,585.0523502549332,531.7549630251708,587.0529567101755],[\"Q\",533.7555695523363,589.0535631654179,540.7576923974152,593.0547760759026],[\"Q\",547.7598152424943,597.0559889863873,559.7634544054868,607.0590212625991],[\"Q\",571.7670935684793,617.0620535388108,584.7710359950545,628.0653890426437],[\"Q\",597.7749784216297,639.0687245464766,607.7780110574568,646.0708471398248],[\"Q\",617.7810436932839,653.072969733173,626.7837730655283,659.0747890989],[\"Q\",635.7865024377727,665.076608464627,643.7889285464344,670.0781246027329],[\"Q\",651.791354655096,675.0796407408388,654.7922644458442,677.0802471960812],[\"Q\",657.7931742365923,679.0808536513235,659.7937807637577,679.0808536513235],[\"Q\",661.7943872909232,679.0808536513235,659.7937807637577,677.0802471960812],[\"Q\",657.7931742365923,675.0796407408388,648.7904448643479,664.076305237006],[\"L\",639.7847154921035,653.0699697331729]]},{\"type\":\"path\",\"version\":\"5.3.0\",\"originX\":\"left\",\"originY\":\"top\",\"left\":594.27,\"top\":591.55,\"width\":22.01,\"height\":56.02,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":3,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"round\",\"strokeUniform\":false,\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"selectable\":true,\"hasControls\":true,\"path\":[[\"M\",617.7840436932839,593.0517760759026],[\"Q\",617.7810436932839,593.0547760759026,616.7807404297012,595.0553825311449],[\"Q\",615.7804371661185,597.0559889863873,613.7798306389532,601.057201896872],[\"Q\",611.7792241117877,605.0584148073567,609.7786175846222,610.0599309454626],[\"Q\",607.7780110574569,615.0614470835684,605.7774045302915,620.0629632216743],[\"Q\",603.776798003126,625.0644793597802,601.7761914759606,630.065995497886],[\"Q\",599.7755849487952,635.0675116359919,597.7749784216298,642.0696342293402],[\"L\",595.7713718944643,649.0747568226884]]},{\"type\":\"path\",\"version\":\"5.3.0\",\"originX\":\"left\",\"originY\":\"top\",\"left\":738.32,\"top\":571.55,\"width\":94.03,\"height\":54.02,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":3,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"round\",\"strokeUniform\":false,\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"selectable\":true,\"hasControls\":true,\"path\":[[\"M\",739.8150418503744,573.0457115234792],[\"Q\",739.8180418503745,573.0487115234793,740.8183451139571,573.0487115234793],[\"Q\",741.8186483775398,573.0487115234793,742.8189516411226,574.0490147511005],[\"Q\",743.8192549047053,575.0493179787215,748.8207712226189,579.0505308892062],[\"Q\",753.8222875405324,583.0517437996909,762.8250169127768,589.0535631654179],[\"Q\",771.8277462850211,595.055382531145,780.8304756572655,601.0572018968721],[\"Q\",789.8332050295099,607.0590212625991,797.8356311381716,612.060537400705],[\"Q\",805.8380572468333,617.0620535388108,812.8401800919123,620.0629632216743],[\"Q\",819.8423029369912,623.0638729045378,824.8438192549047,625.0644793597801],[\"Q\",829.8453355728183,627.0650858150225,831.8459420999836,627.0650858150225],[\"L\",833.8465486271491,627.0650858150225]]},{\"type\":\"path\",\"version\":\"5.3.0\",\"originX\":\"left\",\"originY\":\"top\",\"left\":800.34,\"top\":563.55,\"width\":8.01,\"height\":60.02,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":3,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"round\",\"strokeUniform\":false,\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"selectable\":true,\"hasControls\":true,\"path\":[[\"M\",809.8422703011641,565.0462857025099],[\"Q\",809.8392703011641,565.0462857025099,808.8389670375814,565.0462857025099],[\"Q\",807.8386637739987,565.0462857025099,806.838360510416,565.0462857025099],[\"Q\",805.8380572468333,565.0462857025099,804.8377539832506,566.0465889301311],[\"Q\",803.8374507196679,567.0468921577522,802.8371474560852,575.0493179787215],[\"Q\",801.8368441925024,583.0517437996909,801.8368441925024,589.0535631654179],[\"Q\",801.8368441925024,595.055382531145,801.8368441925024,601.0572018968721],[\"Q\",801.8368441925024,607.0590212625991,801.8368441925024,613.0608406283261],[\"Q\",801.8368441925024,619.0626599940531,801.8368441925024,622.0635696769166],[\"L\",801.8368441925024,625.0674793597802]]},{\"type\":\"path\",\"version\":\"5.3.0\",\"originX\":\"left\",\"originY\":\"top\",\"left\":540.25,\"top\":805.62,\"width\":369.43,\"height\":48.01,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":3,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"round\",\"strokeUniform\":false,\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"selectable\":true,\"hasControls\":true,\"path\":[[\"M\",541.754995660998,807.1196667868336],[\"Q\",541.7579956609981,807.1196667868336,542.7582989245807,807.1196667868336],[\"Q\",543.7586021881634,807.1196667868336,544.7589054517462,807.1196667868336],[\"Q\",545.7592087153289,807.1196667868336,553.7616348239906,807.1196667868336],[\"Q\",561.7640609326522,807.1196667868336,576.7686098863928,807.1196667868336],[\"Q\",591.7731588401335,807.1196667868336,615.7804371661185,808.1199700144548],[\"Q\",639.7877154921035,809.1202732420759,670.7971166631676,814.1217893801818],[\"Q\",701.8065178342315,819.1233055182877,733.8162222688782,825.1251248840147],[\"Q\",765.8259267035249,831.1269442497418,796.835327874589,837.1287636154688],[\"Q\",827.8447290456529,843.1305829811957,847.8507943173071,847.1317958916804],[\"Q\",867.8568595889612,851.1330088021651,880.8608020155365,852.1333120297863],[\"Q\",893.8647444421117,853.1336152574075,900.8668672871906,854.1339184850287],[\"Q\",907.8689901322697,855.1342217126498,909.869596659435,855.1342217126498],[\"Q\",911.8702031866005,855.1342217126498,907.8689901322697,855.1342217126498],[\"Q\",903.8677770779389,855.1342217126498,883.8617118062846,849.1324023469228],[\"L\",863.8526465346304,843.1275829811957]]},{\"type\":\"path\",\"version\":\"5.3.0\",\"originX\":\"left\",\"originY\":\"top\",\"left\":720.31,\"top\":759.6,\"width\":20.01,\"height\":170.06,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":3,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"round\",\"strokeUniform\":false,\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"selectable\":true,\"hasControls\":true,\"path\":[[\"M\",741.8186483775398,761.1027183162596],[\"Q\",741.8186483775398,761.1057183162596,740.8183451139571,761.1057183162596],[\"Q\",739.8180418503745,761.1057183162596,739.8180418503745,763.1063247715019],[\"Q\",739.8180418503745,765.1069312267443,738.8177385867917,771.1087505924713],[\"Q\",737.817435323209,777.1105699581984,736.8171320596264,787.1136022344101],[\"Q\",735.8168287960436,797.1166345106219,733.8162222688782,813.1214861525607],[\"Q\",731.8156157417128,829.1263377944994,729.8150092145474,848.1320991193016],[\"Q\",727.814402687382,867.1378604441039,726.8140994237992,881.1421056308004],[\"Q\",725.8137961602165,895.1463508174968,724.8134928966338,905.1493830937085],[\"Q\",723.8131896330511,915.1524153699202,722.8128863694684,923.1548411908896],[\"L\",721.8095831058856,931.160267011859]]}]}";
      var canvasImage = "canvas.png";
      var fallbackImage = null;
      var fabricCanvas = null, saveTimer = null;
      var originalW = 600, originalH = 800; // defaults
      var editor = document.getElementById('editor');
      var saveStatus = document.getElementById('saveStatus');
      
      try { var saved = localStorage.getItem(STORAGE_KEY); if (saved) { var data = JSON.parse(saved); if (data.content) editor.value = data.content; } } catch(e){}
      
      function scheduleSave() {
        if (saveTimer) clearTimeout(saveTimer);
        saveTimer = setTimeout(function() {
          try { localStorage.setItem(STORAGE_KEY, JSON.stringify({ content: editor.value })); saveStatus.textContent = 'saved'; } catch(e){}
        }, 1000);
      }
      editor.addEventListener('input', function() { saveStatus.textContent = 'modified'; scheduleSave(); });
      
      function scaleCanvasToFit() {
        var container = document.getElementById('canvasContainer');
        var wrapper = document.getElementById('canvasWrapper');
        var rect = container.getBoundingClientRect();
        var containerW = rect.width - 20;
        var containerH = rect.height - 20;
        
        if (containerW <= 0 || containerH <= 0) return;
        
        var scaleX = containerW / originalW;
        var scaleY = containerH / originalH;
        var scale = Math.min(scaleX, scaleY, 1); // never scale up beyond 1
        
        wrapper.style.transform = 'scale(' + scale + ')';
      }
      
      function initCanvas() {
        // Get original dimensions from JSON if available
        if (canvasJson) {
          originalW = canvasJson.width || 600;
          originalH = canvasJson.height || 800;
        }
        
        var el = document.getElementById('fabricCanvas');
        el.width = originalW;
        el.height = originalH;
        
        fabricCanvas = new fabric.Canvas('fabricCanvas', { 
          width: originalW, 
          height: originalH, 
          backgroundColor: null 
        });
        fabricCanvas.freeDrawingBrush.width = 3;
        fabricCanvas.freeDrawingBrush.color = '#000000';
        
        if (canvasJson) {
          fabricCanvas.loadFromJSON(canvasJson, function() {
            fabricCanvas.renderAll();
            scaleCanvasToFit();
          });
        } else if (canvasImage || fallbackImage) {
          fabric.Image.fromURL(canvasImage || fallbackImage, function(img) {
            if (!img) return;
            img.set({ left: 0, top: 0, selectable: true });
            fabricCanvas.add(img);
            fabricCanvas.renderAll();
            scaleCanvasToFit();
          }, null, { crossOrigin: 'anonymous' });
        } else {
          scaleCanvasToFit();
        }
      }
      
      document.getElementById('selectBtn').onclick = function() { 
        if(fabricCanvas) { 
          fabricCanvas.isDrawingMode = false; 
          this.classList.add('active'); 
          document.getElementById('drawBtn').classList.remove('active'); 
        } 
      };
      document.getElementById('drawBtn').onclick = function() { 
        if(fabricCanvas) { 
          fabricCanvas.isDrawingMode = true; 
          this.classList.add('active'); 
          document.getElementById('selectBtn').classList.remove('active'); 
        } 
      };
      
      setTimeout(initCanvas, 150);
      
      window.addEventListener('resize', function() {
        scaleCanvasToFit();
      });
    })();
  </script>
</body>
</html>